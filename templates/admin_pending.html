{% extends "base.html" %}
{% block title %}Pending Approvals • Strop-WebUI{% endblock %}

{% block styles %}
.pending-wrapper {
    width: 90%;
    max-width: 900px;
    margin: 30px auto 0 auto;
    height: 88vh;
    background: #1c1c1f;
    border-radius: 16px;
    border: 1px solid rgba(255,255,255,0.05);
    box-shadow: 0 0 25px rgba(0,0,0,0.5);
    display:flex;
    flex-direction:column;
    overflow:hidden;
}

.pending-header {
    padding: 18px 20px;
    background: #121214;
    border-bottom: 1px solid #2e2e31;
    display:flex;
    align-items:center;
    justify-content:space-between;
    font-size: 18px;
    font-weight: 700;
}

.pending-header .accent { color:#a6c48a; }

.table-wrap {
    flex:1;
    overflow-y:auto;
    padding: 18px;
}

.table-wrap::-webkit-scrollbar { width: 10px; }
.table-wrap::-webkit-scrollbar-thumb {
    background:#2e2e31;
    border-radius: 5px;
}

table {
    width:100%;
    border-collapse: collapse;
    font-size: 14px;
}
th, td {
    padding: 12px 10px;
    border-bottom: 1px solid #2e2e31;
    text-align:left;
    vertical-align:middle;
}
th {
    color:#e0ded8;
    font-weight:700;
    background:#151518;
    position:sticky;
    top:0;
}

.btn-small {
    padding: 8px 12px;
    background: #a6c48a;
    color:#1c1c1f;
    border-radius:8px;
    font-weight:700;
    border:none;
    cursor:pointer;
    transition:0.2s;
    font-size:13px;
}
.btn-small:hover { background:#9ab983; }

.notice {
    padding:14px;
    text-align:center;
    font-size:16px;
    font-weight:700;
    opacity:0.7;
}
{% endblock %}

{% block content %}

<div class="pending-wrapper">

    <div class="pending-header">
        <div>Pending Approvals • <span class="accent">{{ pending|length }}</span></div>

        <a href="/admin" class="btn-small" style="background:#1f1f22; color:#e0ded8;">
            ← Back to Admin
        </a>
    </div>

    <div class="table-wrap">
        {% if pending %}
        <table>
            <thead>
                <tr>
                    <th style="width:60px;">ID</th>
                    <th>Email</th>
                    <th>Name</th>
                    <th style="width:160px;">Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for user in pending %}
                <tr>
                    <td>{{ user.id }}</td>
                    <td>{{ user.email }}</td>
                    <td>{{ user.name }}</td>
                    <td>
                        <form method="POST" action="{{ url_for('main.admin_approve', user_id=user.id) }}">
                            <button class="btn-small" type="submit">Approve</button>
                        </form>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>

        {% else %}
            <div class="notice">No pending users — all good!</div>
        {% endif %}
    </div>

</div>

{% endblock %}
